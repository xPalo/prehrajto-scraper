<h1><%= t(:'video.new') %></h1>

<div class="form-signin my-4 mx-auto w-100 px-3 fw-bold" style="max-width: 600px;">
  <%= form_with(url: videos_path, multipart: true, data: { turbo: false }) do |form| %>
    <div class="mb-4">
      <%= form.label :original_videos, t('video.select_files'), class: "form-label" %>
      <%= file_field_tag 'original_videos[]', multiple: true, accept: "video/*", class: "form-control", required: true, id: "video_file_input" %>
      <%= hidden_field_tag 'recorded_ats', '', id: 'video_recorded_ats' %>
      <div class="form-text"><%= t('video.max_file_size', size: '500MB') %></div>
    </div>

    <div class="text-center">
      <%= form.submit t('video.upload'), class: "btn btn-light my-2 rounded-pill px-4" %>
    </div>
  <% end %>

  <script type="text/javascript">
    document.getElementById('video_file_input').addEventListener('change', function(e) {
      var files = e.target.files;
      var dates = [];
      for (var i = 0; i < files.length; i++) {
        if (files[i].lastModified) {
          dates.push(new Date(files[i].lastModified).toISOString());
        } else {
          dates.push(null);
        }
      }
      document.getElementById('video_recorded_ats').value = JSON.stringify(dates);
    });
  </script>

  <div class="d-flex justify-content-center gap-2 mt-3">
    <%= link_to t('back'), videos_path, class: "btn btn-outline-secondary rounded-pill" %>
  </div>
</div>
